<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Bootstrap 101 Template</title>
                    
        <!-- Bootstrap -->
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
        <link rel="stylesheet" href="http://cdn.datatables.net/1.10.2/css/jquery.dataTables.min.css">

        <link rel="stylesheet" type="text/css" href="http://cdn.datatables.net/plug-ins/be7019ee387/integration/bootstrap/3/dataTables.bootstrap.css">                  
                        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
                        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
                        <!--[if lt IE 9]>
                         <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
                         <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
                         <![endif]-->
                        
    </head>
    
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="http://cdn.datatables.net/1.10.2/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript">
var deserialdata = {},
	gURL = "https://www.googleapis.com/fusiontables/v1/query",
	gTable = "1DznHrRz7_N_Dv38oxq4lTlh_NSENeQNrb87NYY9q";
    gKey ="AIzaSyBFl_aA6lmwGzscXcWgoFhWdYnAJKAf5vg";


function convertJSON(d) {
    d = d || {};
    if (!d.columns && !d.rows) return console.error("convertJSON() >>  was not passed a serialized obj"), [];
    for (var g = [], b = 0; b < d.rows.length; b++) {
        for (var c = {}, a = 0; a < d.columns.length; a++) {
			if (isNaN(d.rows[b][a])) {
				if (-1 != d.columns[a].toLowerCase().search("hits") || -1 != d.columns[a].toLowerCase().search("fill") || -1 != d.columns[a].toLowerCase().search("lord") ) {
					c[d.columns[a].toLowerCase()] = 0;
				} else {
					if (-1 != d.columns[a].toLowerCase().search("name")) {
						c[d.columns[a].toLowerCase()] = '<a href="#" class="unitName notranslate">' + d.rows[b][a] + "</a>";
					} else {
						if ("http" == d.rows[b][a].substr(0, 4) ) {
							c[d.columns[a].toLowerCase()] = '<img src="' + d.rows[b][a] + '" width="40" />';
						} else {
							c[d.columns[a].toLowerCase()] = d.rows[b][a];
						}
					}
				}
			} else {
				if ("" == d.rows[b][a])	{
					c[d.columns[a].toLowerCase()] = "None" 
				} else {
					c[d.columns[a].toLowerCase()] = parseInt(d.rows[b][a]);					
				}
			}			 
		}
        g.push(c)		
    }
    return g
}


function initialize() {
	var g = encodeURIComponent("SELECT 'Number','Name','Attack', 'HP','Grade','Class','Type' FROM " + gTable + " ORDER BY 'Number' ASC"),
	b = [gURL];
    b.push("?sql=" + g);
    b.push("&key=" + gKey);
    b.push("&callback=?");

	console.log(b)
	
    $.ajax({
        url: b.join(""),
        dataType: "jsonp",
        success: function(b) {
            ajaxDataRows = b.rows;
			console.log(b)
            deserialdata = convertJSON(b);
			console.log(deserialdata);
            ssTable = $("#mytable").dataTable({
				data: ajaxDataRows,
				order: [[0, "asc"]]
            });
		}
	});
}
    </script>
    <body>
        <div class="jumbotron">
            <div class="container">
                <h1>Hello, world!</h1>
                <p>This is a simple hero unit, a simple jumbotron-style component for calling extra attention to featured content or information.</p>

            </div>
        </div>
		<table id="mytable" class="table-bordered table-responsive table-hover table-striped table-condensed" style="display:none;clear:both;" width="100%">
	            <thead>
	                <tr>
	                    <th>Number</th>
	                    <th>Name</th>
		                <th>Attack</th>
			            <th>HP</th>	                    
	                </tr>
	            </thead>
	            <tfoot>
	                <tr>
		                <th>Number</th>
	                    <th>Name</th>
		                <th>Attack</th>
			            <th>HP</th>	                    
	                </tr>
	            </tfoot>
		 </table>
		<script type="text/javascript">
$(document).ready(function(d) {
	initialize();	
});
        </script>
    </body>
</html>


